repositories:
  - name: jetstack
    url: https://charts.jetstack.io
  - name: cert-manager-webhook-hetzner
    url: https://vadimkim.github.io/cert-manager-webhook-hetzner
  - name: chartmuseum
    url: https://chartmuseum.github.io/charts
  - name: twuni
    url: https://helm.twun.io
  - name: joxit
    url: https://helm.joxit.dev

releases:

  - name: cert-manager
    chart: jetstack/cert-manager
    version: v1.12.3
    namespace: cert-manager
    values:
      - installCRDs: true

  - name: cert-manager-webhook-hetzner
    chart: cert-manager-webhook-hetzner/cert-manager-webhook-hetzner
    version: 1.2.2
    namespace: cert-manager
    needs:
      - cert-manager/cert-manager
    values:
      - groupName: acme.starwit.de

  - name: chartmuseum
    chart: chartmuseum/chartmuseum
    version: 3.10.1
    namespace: chartmuseum
    needs:
      - cert-manager/cert-manager
    values:
      - ./values/chartmuseum-values.yaml

  - name: docker-registry
    chart: twuni/docker-registry
    version: 2.2.2
    namespace: docker-registry
    needs:
      - cert-manager/cert-manager
    values:
      - ./values/docker-registry-values.yaml

  - name: docker-registry-ui
    chart: joxit/docker-registry-ui
    version: 1.1.2
    namespace: docker-registry
    needs:
      - cert-manager/cert-manager
    values:
      - ./values/docker-registry-ui-values.yaml

  - name: extra-resources
    chart: ./extra-resources
    disableValidation: true
    needs:
      - cert-manager/cert-manager
    values:
      - hetznerDnsApiKey: {{ requiredEnv "HETZNER_API_KEY" }}